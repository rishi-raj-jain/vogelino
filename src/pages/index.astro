---
import { loadJson } from "../../scripts/lib/loadJson";
import type { MappedNotionProject } from "../../scripts/lib/parseOriginalNotionProjects";
import { PROJECTS_JSON_PATH } from "../../scripts/paths";
import Thumbnail from "../components/Thumbnail.astro";
import Layout from "../layouts/Layout.astro";

const projects = (
  await loadJson<MappedNotionProject[]>(PROJECTS_JSON_PATH)
).map((w) => {
  const classes = [
    `group-hover:rotate-1`,
    `group-hover:rotate-0`,
    `group-hover:rotate-2`,
    `group-hover:-rotate-1`,
    `group-hover:-rotate-2`,
  ];
  const rotationClass = classes[Math.floor(Math.random() * classes.length)];
  return {
    ...w,
    rotationClass,
  };
});
---

<Layout title="Welcome">
  <main
    class="grid sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 py-32"
    aria-label="List of selected works"
  >
    {projects.map((work) => <Thumbnail {...work} />)}
  </main>
</Layout>
